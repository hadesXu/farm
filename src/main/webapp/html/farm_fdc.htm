<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml"><head>

	<meta name="Generator" content="ECSHOP v2.7.3" /><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"><meta name="format-detection" content="telephone=no, address=no, email=no">

	<meta name="renderer" content="webkit">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<title>孵蛋场</title>

	<link href="../css/qui.css" rel="stylesheet">

	<link href="../css/style.css" rel="stylesheet">

	<link href="../css/ygc.css" rel="stylesheet">

</head>

<body style="overflow-y: auto;">

<div class="warp-page" style=" background:url(../img/farm_fdc_9.jpg) no-repeat; background-size:100% 100%;">

	

     <style>

		.xs{width:64%;float:left;}

		.xs ul{margin:10px 0;list-style:none;}

		.xs ul li{width:50%;height:40px;line-height:40px;font-size:18px;color:#fff;float:left;}

		.wh{width:20px;height:20px;margin-left:15px;}

		.right_ico{float:right;font-size:18px;margin:10px;color:#fff;}

		.right_td{background:rgba(125,120,120,0.34);padding:2px;border-bottom:1px solid #999;text-align:center;color:#fff;}

		

    </style>               

    <div class="xs">

    	<ul>

        	<li><img src="../img/dan.png" class="wh">&nbsp;<span id="eggSum">0</span> 只</li>

           <li class="up-box3" style="width:20%;"><img src="../img/caigou.png" width="35"></li>                               

            <li class="up-box4"  style="width:20%;"><img src="../img/jqrh.png" width="35"></li>          

        </ul>

    </div>

      

    <div class="right_ico" style="margin-top:5px; ">

    	<!--<img src="../img/siliao.png" class="ytb">  parent_id-->

       <ul style="z-index:6; position:relative;">

            <li id="jiawenzj" class="right_td" onClick="jiawen('jiawenzj')">恒温/38°C</li>

            <li class="right_td" onClick="jiawen('jiawen')" style="position:relative;">

                <samp id="fdcxhd" style=" font-size:40px; color:#F00; position:absolute; left:-12px; top:-25px;">·</samp>帮师父加温</li>

            <li class="right_td up-box" >放蛋孵化</li>

            <a href="farm_jyq.htm"><li  class="right_td" style="border:none;">购买鸭蛋</li></a>

            <li class="right_td up-box2" style="border:none;" onclick="stealEgg()">"偷蛋"</li>

           <li style="text-align:right;z-index:6; position:relative;">
               <img  src="../img/shou.gif" class="ytb" onClick="shouhuo()" />
           </li>
           <style>
               .ytb{width:40px;height:40px;margin:10px;}
           </style>

           

       </ul>

        

    </div>

	

    <div style="position:absolute;width:15%;top:21%;left:15%;">

        <img src="../img/jidan_3.png" >

     		       

    </div>

                

    <div style="position:absolute;width:15%;top:21.5%;left:44%;">

     	<img src="../img/jidan_5.png" >     		       

    </div>

                

    <div style="position:absolute;width:15%;top:21.5%;right:15%;">

     	<img src="../img/jidan_5.png" >     		       

    </div>

                

    <div style="position:absolute;width:15%;bottom:15%;left:18%;">

        <img src="../img/jidan_6.png" >

    </div>

                

    <div style="position:absolute;width:15%;bottom:15%;left:45%;">

		<img src="../img/jidan_6.png" >

    </div>

                 

    <div style="position:absolute;width:15%;bottom:41.5%;right:15%;">     	

        <img src="../img/jidan_6.png" >

    </div>

          

            

    <div style="position:absolute;width:15%;bottom:10%;left:18%;">

     	

        <img src="../img/jidan_6.png" >

    </div>

          

            

    <div style="position:absolute;width:15%;bottom:10%;left:45%;">

     	<img src="../img/jidan_6.png" >

    </div>

          

           

     

    <div style="position:absolute;bottom:2%;left:10%;z-index:6;">

        <img src="../img/dog.gif" class="stylie" style="width:66px;height:46px;">

    </div> 

                      

     

     

     <!--<div style="position:absolute;top:48%;right: 18%;">

     	<img src="../img/ck1.gif" style="width:60px;height:60px;">

     </div>-->

     

     <div style="position:absolute;bottom:7%;right:5%; z-index:999;">

    	 <a href="farm_yjc.htm"><img src="../img/yjc_tb.png" style="width:60px;height:60px;"></a>

     </div>

     

     



<style type="text/css">







.close-up {

	position: absolute;

	top: 1rem;

 right: -.5rem;

	color: blue;

	background: url(../img/close.png) no-repeat;

	background-size: 100% 100%;

	height: 2.2rem;

	width: 2rem;

}



.all-gold {

	padding-top: 3.5rem;

	padding-left: 1.6rem;

 font-size: .8rem;

	color: #723308;

	font-weight: bold;

}

.top-gold {

 padding: .6rem 0 .6rem 1.6rem;

 font-size: .8rem;

	color: #723308;

	font-weight: bold;

}

.top-gold div {

	float: left;

}

.top-gold input {

	width: 7rem;

	background: white;

	border: none

}



    .popup-box {

        width: 100%;

        height: 100%;

        background: rgba(22,22,22,.3);

        position: absolute;

        left: 0;

        top: 0;

        overflow: hidden;

        display: none;

        z-index: 9;

    }

	.popup-box2 {

        width: 100%;

        height: 100%;

        background: rgba(22,22,22,.3);

        position: absolute;

        left: 0;

        top: 0;

        overflow: hidden;

        display: none;

        z-index: 9;

    }

	



    .popup {

        position: absolute;

        top: 50%;

        left: 50%;

        margin-top: -50%;

        margin-left: -50%;

        width: 100%;

        height: 40%;

        min-height: 320px;

        background: url(../img/shops.png) no-repeat;

        background-size: 100% 100%;

        z-index: 9;

    }



    .close-x {

        position: absolute;

        top: -.3rem;

        right: 0;

        color: blue;

        background: url(../img/close.png) no-repeat;

        background-size: 100% 100%;

        height: 2.4rem;

        width: 2rem;

    }

	.popup-con{

		width:80%;

		margin-left:10%;

		text-align:center;	

		position:absolute;

		top:26%;

	}

	.popup-con ul{margin:0px;padding:0px;list-style:none;}

	.popup-con ul li{width:100%;height:30px;line-height:30px;font-size:18px;}

	



</style>



    <div class="popup-box">

        <div class="popup popupimg" style=" position:relative;">

            <div class="close close-x"></div>

            <div class="tab-btn">

                <span id="StoreControl_tab_title01" class="tab-01 a-tab00" data-num="0" data-target="#StoreControl_tab_conter01"></span>

            </div>

            <div class="popup-con" style="top:35%;">

               <ul>

                    <li style="color:#fff;">放蛋孵化</li>

                    <li>剩余鸭蛋:<span id="eggNum">0</span> 只</li>

                    <li>数量：<input type="text" name="number" id="number" placeholder="放入鸭蛋" style="height:30px; width:50%; line-height:30px;border-radius:5px;text-indent:5px;"></li>

                <li><input type="submit"  onClick="fandan()" value="确定" style="width:50%;height:28px;line-height:22px;font-size:18px;margin-top:10px;border-radius:5px; background:#21EA15;color:#fff;"></li>

               </ul>

            </div>

   		</div>

 	

    </div>

        

    

    <div class="popup-box2">

        <div class="popup popupimg" style=" position:relative;">

            <div class="close close-x"></div>

            <div class="tab-btn">

                <span id="StoreControl_tab_title01" class="tab-01 a-tab00" data-num="0" data-target="#StoreControl_tab_conter01"></span>

            </div>

            <div class="popup-con" style="top:28%;">

               <ul>

                    <li style="color:#fff;">首次进入需支付20菜票</li>                  

                    <li>菜票：<input type="text" value="20" name="number" placeholder="20" readonly style="height:30px;line-height:30px;border-radius:5px;text-indent:5px;"></li>

                    <li><input type="submit" name="number" onClick="cc()" value="立即支付" style="width:50%;height:46px;line-height:22px;font-size:18px;margin-top:20px;border-radius:5px; background:#389c32;color:#fff;"></li>

          		 </ul>

       		 </div>

    	</div>

    </div>

                   

	<script type="text/javascript" src="../js/jquery.min.js"></script>

    <script src="../js/swiper.jquery.min.js"></script>

    <script src="../js/index.js?1.0"></script>

    <script src="../js/layer.js"></script>

       

         

   <style>

	 .popup-box3 {

			width: 100%;

			height: 100%;

			background: rgba(22,22,22,.3);

			position: absolute;

			left: 0;

			top: 0;

			overflow: hidden;

			display: none;

			z-index: 999;

		}

		.popup-box4 {

			width: 100%;

			height: 100%;

			background: rgba(22,22,22,.3);

			position: absolute;

			left: 0;

			top: 0;

			overflow: hidden;

			display: none;

			z-index: 999;

		}

 .popup-con-mg{width:80%;

		margin-left:10%;

		text-align:center;	

		position:absolute;

		top:26%;}

 

 </style>

 

 

    <div class="popup-box3">

        <div class="popup popupimg" style=" position:relative;">

            <div class="close close-x"></div>

            <div class="tab-btn">

                <span id="StoreControl_tab_title01" class="tab-01 a-tab00" data-num="0" data-target="#StoreControl_tab_conter01"></span>

            </div>

            <div style="float:right;padding-top:49px;margin-right:9%;color:#fff;font-size:14px;">到期时间：<span id="dogEndDay"></span></div>

            <div class="popup-con-mg" style="top:28%;">

               <ul>

                    <li style="color:#fff;">买狗看护</li>

                  	<li style="font-size:14px;line-height:17px;text-align:left;">功能：1、每天16时可自动帮主人收获防止被偷。<br/>功能：2、每天16时自动帮加温鸭蛋喂食鸭（需鸭粮充足，否则无法自动喂食）<br/><!--<span style="color:#F00;">特惠：现在购买90天送10天</span>--></li>

                    <li style="font-size:14px;line-height:17px;text-align:center;">

                        <label><input type="radio" name="RadioGroup1" value="1" id="RadioGroup1_0" style="width:16px;height:16px; vertical-align:text-bottom;" onFocus="js(1)">25菜票/30天</label><br/>

                        <label><input type="radio" name="RadioGroup1" value="2" id="RadioGroup1_1" style="width:16px;height:16px;vertical-align:text-bottom;" checked  onFocus="js(2)">50菜票/60天</label><br/>

                        <label><input type="radio" name="RadioGroup1" value="3" id="RadioGroup1_2" style="width:16px;height:16px;vertical-align:text-bottom;" onFocus="js(3)">75菜票/90天</label>
                        <input type="hidden" id="caipiao">
                    </li>

<!--                    <li style="font-size:12px;text-align:center;">菜票：<input type="text" value="" id="caipiao" name="caipiao" placeholder="0" readonly style="background:none;border:none;width:30px;"></li>

-->                    <li><input type="submit" name="number" onClick="mgkh('31')" value="续费" style="width:50%;height:28px;line-height:22px;font-size:18px;border-radius:5px; background:#21EA15;color:#fff;"></li>

          		 </ul>

       		 </div>

    	</div>

    </div>

             

    <div class="popup-box4">

        <div class="popup popupimg" style=" position:relative;">

            <div class="close close-x"></div>

            <div class="tab-btn">

                <span id="StoreControl_tab_title01" class="tab-01 a-tab00" data-num="0" data-target="#StoreControl_tab_conter01"></span>

            </div>
            <div style="float:right;padding-top:49px;margin-right:9%;color:#fff;font-size:14px;">到期时间：<span id="robotEndDay"></span></div>
            <div class="popup-con-mg" style="top:28%;">

               <ul>


                    <li style="color:#fff;">机器人</li>

                  	<li style="font-size:14px;line-height:17px;text-align:left;">功能：每天15时可自动帮主人收获购买放养挂单加温喂食鸭（需金额充足，否则无法自动操作，也请不要在凌晨0时到15时个人操作）<br/><!--<span style="color:#F00;">特惠：现在购买90天送10天</span>--></li>

                    <li style="font-size:14px;line-height:17px;text-align:center;">

                        <label><input type="radio" name="RadioGroup2" value="1" id="RadioGroup2_0" style="width:16px;height:16px; vertical-align:text-bottom;" onFocus="js(1)">40菜票/30天</label><br/>

                        <label><input type="radio" name="RadioGroup2" value="2" id="RadioGroup2_1" style="width:16px;height:16px;vertical-align:text-bottom;" checked  onFocus="js(2)">80菜票/60天</label><br/>

                        <label><input type="radio" name="RadioGroup2" value="3" id="RadioGroup2_2" style="width:16px;height:16px;vertical-align:text-bottom;" onFocus="js(3)">120菜票/90天</label>

                    </li>

<!--                    <li style="font-size:12px;text-align:center;">菜票：<input type="text" value="" id="caipiao" name="caipiao" placeholder="0" readonly style="background:none;border:none;width:30px;"></li>

-->                 <li><input type="submit" name="number" onClick="mgkh('32')" value="续费" style="width:50%;height:28px;line-height:22px;font-size:18px;border-radius:5px; background:#21EA15;color:#fff;"></li>

          		</ul>

       		 </div>

    	</div>

    </div>

	<script>

	 	//默认显示菜票
		document.getElementById("caipiao").value=2*'25';
	 //购买狗看护	

	    function mgkh(act){
            if("31" == act){ //狗看护
                var monthStr =$('input:radio[name="RadioGroup1"]:checked').val();//获取单选按钮的值
                jsonTokenAjax("/api/order/buyDoorDogOrRobot", "POST", {"monthStr":monthStr,"type":1}, buyDoorDogOrRobotCallBack, errorback);
            }else if("32" == act){
                var monthStr=$('input:radio[name="RadioGroup2"]:checked').val();//获取单选按钮的值
                jsonTokenAjax("/api/order/buyDoorDogOrRobot", "POST", {"monthStr":monthStr,"type":2}, buyDoorDogOrRobotCallBack, errorback);
            }else{
                return false;
            }
        }
       function buyDoorDogOrRobotCallBack(data){
           var result = data.result;
           if(result.code=='0000'){
               //提示
               layer.open({
                   content: "购买成功"
                   ,skin: 'msg'
                   ,time: 1 //2秒后自动关闭
               });
               window.setTimeout("window.location='farm_fdc.htm'",1200);
           } else{
               //提示
               layer.open({
                   content: result.message
                   ,skin: 'msg'
                   ,time: 1 //2秒后自动关闭
               });
           }
       }
		 function accMul(arg1,arg2)  

		 {  

			 var m=0,s1=arg1.toString(),s2=arg2.toString();  

			 try{m+=s1.split(".")[1].length}catch(e){}  

			 try{m+=s2.split(".")[1].length}catch(e){} 

			 return Number(s1.replace(".",""))*Number(s2.replace(".",""))/Math.pow(10,m)  

		 } 
		 function js(type){
				if(type==1){document.getElementById("caipiao").value=accMul(1,'25');}
				if(type==2){document.getElementById("caipiao").value=accMul(2,'25');}
				if(type==3){document.getElementById("caipiao").value=accMul(3,'25');}
		}

	 </script>
    <div class="page-footer" style="z-index:999; ">
	    <div class="tools" style="width:86%;">
	        <ul class="tool-ul clearfix" style="top:-28%;">
	            <li class="tools04"><a href="index.html" tppabs="javascript:;">
	                <img src="../img/wdnc.png" tppabs="javascript:;"></a></li>
	            <li class="tools04"><a href="farm_yjc.htm" tppabs="javascript:;">
	                <img src="../img/wdck.png" tppabs="javascript:;"></a></li>

	            <li class="tools04 up-open"><a href="farm_jyq.htm" tppabs="javascript:;">
	                <img src="../img/jyq.png" tppabs="javascript:;"></a></li>
	           <li class="tools04"><a href="farm_shopping.php-act=list.htm" tppabs="javascript:;">
	                <img src="../img/gwsc.png" tppabs="javascript:;"></a></li>
	           <li class="tools04"><a href="v_user.html" tppabs="javascript:;">
	                <img src="../img/grxx.png" tppabs="javascript:;"></a></li>
	        </ul>
	    </div>
	</div>
	<script src="../js/layer.js"></script>
	<script>
		function wkf(){
			 layer.open({
				content: '正在开发中...'
				,skin: 'msg'
				,time: 1 //2秒后自动关闭
			  });
		}
	</script>
    </div>
	<script type="text/javascript">
        function shouhuo(){
            jsonTokenAjax("/api/farm/shouhuo", "POST", {"goodTypeStr":"2"}, shouhuoCallBack, errorback);
        }

        function shouhuoCallBack(data){
            if(data.status == "1"){
                var result = data.result;
                if(result.code=='0000'){
                    //提示
                    layer.open({
                        content: "收获成功"
                        ,skin: 'msg'
                        ,time: 1 //2秒后自动关闭
                    });
                    //window.setTimeout("window.location='farm_fdc.htm'",1200);
                } else{
                    //提示
                    layer.open({
                        content: result.message
                        ,skin: 'msg'
                        ,time: 1 //2秒后自动关闭
                    });
                }
            }
        }


	//放蛋孵化
function fandan(){
    var eggNum = $("#eggNum").html()*1;
    var number=$('#number').val();
    var timess=Date.parse(new Date());
    if(number==''){
         layer.open({
                content:'请输入您要放养的数量'
                ,skin: 'msg'
                ,time: 1.4 //2秒后自动关闭
              });
    }else{
        if(!/^\d+?$/.test(number)){
            layer.open({
                content:'请输入正整数'
                ,skin: 'msg'
                ,time: 2 //2秒后自动关闭
            });return;
        }
        if(number%10!=0){
            layer.open({
                content:'请输入10的整数倍'
                ,skin: 'msg'
                ,time: 2 //2秒后自动关闭
            });return;
        }
    }
    if(eggNum < number){
        layer.open({
            content:'剩余鸭蛋数量不足'
            ,skin: 'msg'
            ,time: 2 //2秒后自动关闭
        });return;
    }
    jsonTokenAjax("/api/farm/eggBreeding", "POST", {"eggNum":number}, eggBreedingCallBack, errorback);
}
    function eggBreedingCallBack(data){
        var result = data.result;
        if(result.code=='0000'){
            //提示
            layer.open({
                content: "成功放蛋孵化"
                ,skin: 'msg'
                ,time: 1 //2秒后自动关闭
            });
            window.setTimeout("window.location='farm_fdc.htm'",1200);
        } else{
            //提示
            layer.open({
                content: result.message
                ,skin: 'msg'
                ,time: 1 //2秒后自动关闭
            });
        }
    }
	//偷蛋第一次进入
    function cc(){
        jsonTokenAjax("/api/order/payStealDuckOrEgg", "POST", {"type":1}, payStealEggCallBack, errorback);
    }
    function payStealEggCallBack(data){
        var result = data.result;
        if(result.code=='0000'){
            //提示
            layer.open({
                content: "支付成功"
                ,skin: 'msg'
                ,time: 1 //2秒后自动关闭
            });
            window.setTimeout("window.location='farm_fdc.htm'",1200);
        } else{
            //提示
            layer.open({
                content: result.message
                ,skin: 'msg'
                ,time: 1 //2秒后自动关闭
            });
        }
    }
//帮师傅加温-给自己加温
function jiawen(act){
    var warmWho = 2;//给师傅加温
    if("jiawenzj" == act){//给自己加温
        warmWho = 1;
    }
    jsonTokenAjax("/api/farm/warm", "POST", {"warmWho":warmWho}, warmCallBack, errorback);
}
function warmCallBack(data){
    var result = data.result;
    if(result.code=='0000'){
        //提示
        layer.open({
            content: "加温成功"
            ,skin: 'msg'
            ,time: 1 //2秒后自动关闭
        });
        $("#jiawenzj").html("恒温/38°C");
        window.setTimeout("window.location='farm_fdc.htm'",1200);
    } else{
        //提示
        layer.open({
            content: result.message
            ,skin: 'msg'
            ,time: 1 //2秒后自动关闭
        });
    }
}


    </script>

<script src="../js/main.js" tppabs="javascript:;"></script>
<script language="javascript">
    $(function () {
        checkLogin();
        jsonTokenAjax("/api/farm/fdcInfo", "GET", {}, callBack, errorback);
    });

    var ifSteal = 2;//否(今日是否可偷)
    var sEgg = 1;//是（是否有偷蛋权限）

    function callBack(data) {
        if(data.status == "1"){
            var result = data.result;
            ifSteal = result.ifSteal;
            sEgg = result.sEgg;
            var ifhot = result.ifHot;
            if(ifhot == '1'){
                $("#jiawenzj").html("恒温/38°C");
            }else{
                $("#jiawenzj").html("28°C");
                $("#jiawenzj").css({ color: "red" });
            }
            $("#dogEndDay").html(result.dogEndDay);
            $("#robotEndDay").html(result.robotEndDay);
            console.log(result);
            $("#eggSum").html(result.eggDoing);
            $("#eggNum").html(result.egg);
            TanWind("up-box3", "close", "popup-box3");	//商店弹窗
            TanWind("up-box4", "close", "popup-box4");	//商店弹窗

            /*if(result.hasDog == 2){
                TanWind("up-box3", "close", "popup-box3");	//商店弹窗
            }
            if(result.hasRobot == 2){
                TanWind("up-box4", "close", "popup-box4");	//商店弹窗
            }*/
            if(result.sEgg !=2){
                TanWind("up-box2", "close", "popup-box2");	//商店弹窗
            }
        }else{

        }
    }

    function stealEgg(){
       if(sEgg == 2){
           window.location.href = "farm_td.html";
       }
    }

    function errorback(data) {
        if (data.error.code == "1006") {
            location.href = "v_user-login.htm"
        }
        alert('error:' + JSON.stringify(data));
    }

    //弹窗
    function TanWind(oid, cid, sid) {

        var $oid = $("." + oid),
                $cid = $("." + cid),
                $sid = $("." + sid);
        $oid.click(function () {
            var $this = $(this);
            var price = $this.data("price");
            var productid = $this.data("productid");
            if (price != null && productid != null) {
                $this.addClass("shop-li02").siblings(".shop-li02").removeClass('shop-li02');
                $('#product_price').text(price);
                $('#productid').val(productid);
                $('#input_num').val(1);
            }
            $sid.show();
        });
        $cid.click(function () {
            $sid.hide();
        })
    };
</script>
</body>
</html>